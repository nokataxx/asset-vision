# 要求仕様書：金融資産シミュレーター

**作成日**: 2025年1月19日
**バージョン**: 2.15

---

## 1. 概要

### 1.1 目的

本アプリケーションは、ユーザーの金融資産（株式、国債、現金）と収支計画を入力し、レジームスイッチングモデルとモンテカルロシミュレーションを組み合わせて将来の資産推移を予測するツールである。

市場の局面（通常期・暴落期・戻り期）を考慮したリアルなシミュレーションにより、資産枯渇リスクや暴落の影響を可視化し、ユーザーの資産計画立案を支援する。

### 1.2 技術スタック

| 項目 | 内容 |
|------|------|
| 言語 | TypeScript |
| フレームワーク | React + Vite |
| スタイリング | Tailwind CSS |
| UIコンポーネント | shadcn/ui |
| 認証 | Supabase Auth（メール/パスワード） |
| データベース | Supabase（PostgreSQL） |
| シミュレーション | クライアントサイドTypeScript |

---

## 2. 画面構成

本アプリケーションは**1画面構成**とする。

### 2.1 メイン画面レイアウト

```
┌─────────────────────────────────────────────────────────────────────────┐
│  金融資産シミュレーター                    [ログイン] or [ユーザー名]  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  【入力エリア】                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 🔄 ローカル/クラウドに自動保存              [設定をリセット]    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌───────────────────────┬─────────────────────────────────────────┐   │
│  │  ■ 現在の資産         │  ■ レジーム設定                        │   │
│  │    - 株式・投信       │    - 通常期/暴落期/戻り期の利回り      │   │
│  │    - 国債（残高/上限）│    - 各期の標準偏差                    │   │
│  │    - 現金（残高/上限）│    - 暴落発生確率、国債リターン        │   │
│  │                       │    - 長期期待リターン表示              │   │
│  └───────────────────────┴─────────────────────────────────────────┘   │
│                                                                         │
│  ┌───────────────────────┬─────────────────────────────────────────┐   │
│  │  ■ 収支計画           │  ■ 年次収支テーブル                    │   │
│  │    - 年齢             │    - 年/年齢/収入/支出①/支出②        │   │
│  │    - 開始年/期間      │    - 各年の値を直接編集可能            │   │
│  │    - 収入成長率       │    - 75%/50%/25%/10%タイル表示         │   │
│  │    - 支出成長率       │    - クリアボタン付き                  │   │
│  └───────────────────────┴─────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                    [▶ シミュレーション実行]                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  【シミュレーション結果】                                               │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  ■ 資産推移グラフ（75%/50%/25%/10%タイルライン）               │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  ■ サマリー指標                                                 │   │
│  │    成功率/安全引出率/シナリオ別(枯渇年齢,期末,最低)/暴落回数    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  ■ 年次結果テーブル                                             │   │
│  │    年/年齢/収入/支出①/支出②/資産(75%,50%,25%,10%)             │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  ■ 50%タイル試行                                                │   │
│  │    年/年齢/レジーム/収入/支出①/支出②/現金/国債/株式/合計      │   │
│  │    ※年次資産推移が50%タイルに最も近い試行を選択して詳細表示    │   │
│  │    ※暴落期は赤背景、戻り期は黄背景で表示                       │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

※ 画面幅が狭い場合は縦並びに自動調整（レスポンシブデザイン）

---

## 3. 入力仕様

### 3.1 現在の資産

| 項目 | 説明 | 単位 | デフォルト値 |
|------|------|------|-------------|
| 株式・投資信託 | 現在の株式・投資信託保有額（合計） | 万円 | 0 |
| 国債 | 現在の国債保有額 | 万円 | 0 |
| 国債積立上限 | 国債残高の上限 | 万円 | 1,000 |
| 現金 | 現在の現金保有額 | 万円 | 0 |
| 現金積立上限 | 現金残高の上限 | 万円 | 500 |
| 年齢 | 現在の年齢 | 歳 | 30 |

**積立上限の役割**: シミュレーション中に株式の利益や収支プラス分を配分する際、現金・国債はこの上限を超えて積立されない。上限を超える分は株式に積立される。

---

### 3.2 収支計画

#### 基本設定

| 項目 | 説明 | デフォルト値 |
|------|------|-------------|
| 開始年 | シミュレーション開始年 | 現在年 |
| シミュレーション期間 | 何年間シミュレーションするか | 30年 |
| 収入成長率 | 年間収入の成長率（%） | 0% |
| 基本生活費成長率 | 年間基本生活費の成長率（%） | 0% |

#### 支出の2分類

| 分類 | 説明 | 入力方法 |
|------|------|----------|
| 基本生活費（支出①） | 毎年発生する生活費 | 年次テーブルで入力（成長率で自動計算） |
| 臨時支出（支出②） | 特定年のみ発生する支出 | 年次テーブルで個別に入力 |

#### 年次テーブル

収入・支出を年ごとに直接編集できる。収入または基本生活費を変更すると、それ以降の年に成長率が自動適用される。

| 列 | 説明 |
|----|------|
| 年 | 対象年 |
| 年齢 | その年の年齢 |
| 収入 | その年の収入（変更すると以降の年に成長率適用） |
| 基本生活費（支出①） | その年の基本生活費（変更すると以降の年に成長率適用） |
| 臨時支出（支出②） | その年の臨時支出（車購入、リフォーム等） |

---

### 3.3 レジーム設定

#### 株式レジームパラメータ

| 項目 | 説明 | デフォルト値 |
|------|------|-------------|
| 通常期利回り | 通常期の年間利回り | 10% |
| 通常期標準偏差 | 通常期のリターンのばらつき | 10% |
| 暴落期利回り | 暴落期の年間利回り | -22% |
| 暴落期標準偏差 | 暴落期のリターンのばらつき | 28% |
| 戻り期利回り | 戻り期の年間利回り | 18% |
| 戻り期標準偏差 | 戻り期のリターンのばらつき | 20% |
| 暴落発生確率 | 1年あたりの暴落発生確率 | 13% |

※上記デフォルト値はS&P 500および全世界株式インデックス（MSCI ACWI）の過去実績に基づく（名目リターン）。25%タイルを基準に計画を立てることを推奨。

#### リターン分布モデル

株式リターンの生成には**t分布（自由度5）**を使用する。

| 項目 | 仕様 |
|------|------|
| 分布 | t分布 |
| 自由度 | 5（固定） |
| 理由 | 正規分布より裾が厚く、極端な下落（ファットテール）をより現実的にモデル化できる |

**なぜ自由度5か：**
- 学術研究において、株式リターンは自由度4〜8のt分布でよくフィットすることが知られている（Bollerslev 1987他）
- 自由度5は「やや保守的」な設定で、極端なイベントを適度に考慮
- 自由度が小さいほど裾が厚くなり、極端な値が出やすくなる

**正規分布との違い（平均-22%、標準偏差28%の暴落期の例）：**
| 分布 | -50%以下の確率 |
|------|----------------|
| 正規分布 | 約16% |
| t分布（自由度5） | 約22% |

**スケール調整：**
t分布ではスケールパラメータと標準偏差が異なる（t分布の標準偏差 = スケール × √(df/(df-2))）。正規分布と同じ標準偏差を維持しつつ裾だけを厚くするため、スケールパラメータを調整する。

```
調整係数 = √((df-2)/df) = √(3/5) ≈ 0.7746
スケール = 標準偏差 × 調整係数
```

これにより、設定した標準偏差は正規分布と同じ解釈となり、極端な値が出る確率だけが上がる。

※自由度・スケール調整はUIには表示せず、内部で固定値として使用

#### 歴史的データの根拠

**データソース:**
- [NYU Stern - Historical Returns on Stocks, Bonds and Bills: 1928-2024](https://pages.stern.nyu.edu/~adamodar/New_Home_Page/datafile/histretSP.html)
- [Hartford Funds - 10 Things You Should Know About Bear Markets](https://www.hartfordfunds.com/practice-management/client-conversations/managing-volatility/bear-markets.html)
- [Capital Wealth Advisors - 94 Years of S&P 500 Returns](https://www.capitalwealthadvisors.com/patience-pays-analyzing-94-years-of-sp-500-returns/)
- [LazyPortfolioETF - iShares MSCI ACWI ETF](https://www.lazyportfolioetf.com/etf/ishares-msci-acwi/)

**通常期（正のリターン年）:**
- 発生頻度: 74%（約4年中3年）
- 全期間平均リターン: 約10%（1926年以降）
- インデックス投信の通常期標準偏差: 10-15%（推定）

**暴落期（-10%以上の下落年）:**
- 発生頻度: 12回/94年 = 約13%（約8年に1回）
- 平均リターン: -22.2%
- 主な下落年: 2008年(-37%)、2002年(-22%)、1974年(-26%)、1937年(-35%)、1931年(-43%)

**回復期:**
- ブルマーケット平均年間リターン: +21%（Hartford Funds）
- 最悪の年の後の3年平均リターン: +35%（累計）

#### レジーム遷移モデル

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│    ┌────────┐   暴落発生確率    ┌────────┐            │
│    │ 通常期 │ ───────────────→ │ 暴落期 │            │
│    │  +10%  │                   │  -22%  │            │
│    └────────┘                   └────────┘            │
│         ↑                            │                │
│         │                            │ 翌年自動遷移    │
│         │                            ↓                │
│         │   株式残高が回復      ┌────────┐            │
│         └──────────────────── │ 戻り期 │            │
│                                 │  +18%  │            │
│                                 └────────┘            │
│                                                         │
│  ※戻り期中も暴落発生確率で再度暴落期へ遷移する可能性あり │
└─────────────────────────────────────────────────────────┘
```

**通常期の定義**: 市場が正常に機能している期間。平均リターン+10%だが、標準偏差10%により年によって変動する。約16%の確率でマイナスリターンとなるが、これは通常の変動範囲内。

**暴落期の定義**: 年間リターンが-10%以上の下落となる年に相当。歴史的には約8年に1回（13%/年）の頻度で発生し、平均リターンは-22%。S&P 500の1926年以降のデータでは、-10%以上の下落年は94年間で12回発生。

**戻り期（回復期）の定義**: 暴落期の翌年から、株式残高が回復目標に達するまでの期間。回復目標は暴落直前の株式残高を基準とし、毎年の収支（収入-支出）に応じて調整される。赤字の年は目標が下がり、黒字の年は目標が上がる。回復目標に達した時点で通常期に戻る。

**例**: 暴落前残高100万円、毎年10万円の赤字（収入10万、支出20万）の場合
- 1年目の回復目標: 90万円（100万 - 10万）
- 2年目の回復目標: 80万円（90万 - 10万）

#### その他資産のリターン

| 項目 | 説明 | デフォルト値 |
|------|------|-------------|
| 国債リターン | 国債の年間利回り | 1.2% |
| 現金リターン | 現金の年間利回り | 0% |

---

### 3.4 取崩し優先順位（固定ロジック）

取崩し優先順位は経済合理性に基づき固定とする（UIでの変更不可）。

| 局面 | 1位 | 2位 | 3位 | 理由 |
|------|-----|-----|-----|------|
| 通常期 | 株式 | 現金 | 国債 | 成長している株式から利益確定 |
| 暴落期 | 現金 | 国債 | 株式 | 株式の回復を待つため、現金・国債から優先的に取崩す |
| 回復期 | 現金 | 国債 | 株式 | 暴落期と同様、株式の回復を待つ |

※現金・国債が枯渇した場合は、株式から取崩す
※プログラム上は変更可能（`DEFAULT_WITHDRAWAL_PRIORITY`で定義）

---

### 3.5 積立ロジック（固定ルール）

シミュレーション中に資金を積立する場面は2つある。全局面で同じ優先順位で上限を守って積立される。

#### 積立が発生する場面

| 場面 | 説明 |
|------|------|
| 資産リターンの配分 | 国債・株式のリターン（プラスの場合）を各資産に配分 |
| 収支プラス時 | 収入が支出を上回った場合、余剰を各資産に積立 |

#### 積立優先順位（全局面共通）

| 優先順位 | 資産 | 上限 | 理由 |
|---------|------|------|------|
| 1位 | 現金 | 現金積立上限まで | 流動性確保（緊急時に即座に使用可能） |
| 2位 | 国債 | 国債積立上限まで | 安全資産の確保（暴落時・回復期の取崩し原資） |
| 3位 | 株式 | 上限なし | 残りは成長資産へ |

※通常期に現金・国債を上限まで積み立てておくことで、暴落期・回復期のバッファとして機能する

#### 積立ロジック

```
積立処理（積立額、現在残高、上限設定）:

  残り積立額 = 積立額

  1. 現金を上限まで積立
     現金への積立 = min(残り積立額, 現金上限 - 現金残高)
     現金残高 += 現金への積立
     残り積立額 -= 現金への積立

  2. 国債を上限まで積立
     国債への積立 = min(残り積立額, 国債上限 - 国債残高)
     国債残高 += 国債への積立
     残り積立額 -= 国債への積立

  3. 残りは株式へ
     株式残高 += 残り積立額
```

---

## 4. シミュレーション仕様

### 4.1 シミュレーション手法

| 項目 | 仕様 |
|------|------|
| 手法 | レジームスイッチング＋モンテカルロシミュレーション |
| 試行回数 | 1,000回（デフォルト） |
| 時間単位 | 年次 |

### 4.2 シミュレーションロジック

```
各シミュレーション試行（1,000回）:

  初期状態:
    株式残高 = 入力値
    国債残高 = 入力値
    現金残高 = 入力値
    現在レジーム = 通常期
    暴落前株式残高 = 0（回復判定用）

  各年のループ:

    1. レジーム遷移の判定
       ├─ 現在が通常期の場合:
       │    乱数 < 暴落発生確率 → 暴落期へ遷移、暴落前株式残高を記録
       ├─ 現在が暴落期の場合:
       │    → 戻り期へ自動遷移
       └─ 現在が戻り期の場合:
            ├─ 乱数 < 暴落発生確率 → 再度暴落期へ遷移
            └─ 株式残高 ≧ 暴落前株式残高 → 通常期へ遷移

    2. 資産の成長（国債リターンと株式リターンを別々に処理）

       2a. 国債リターンの配分
           国債利益 = 国債残高 × 国債リターン
           → 現金（上限まで）→ 国債（上限まで）→ 株式 の順で配分

       2b. 株式リターンの処理
           株式リターン = t分布乱数(レジーム利回り, レジーム標準偏差, 自由度5)
           株式利益 = 株式残高 × 株式リターン
           ├─ 利益 > 0 の場合:
           │    現金（上限まで）→ 国債（上限まで）→ 株式 の順で配分
           └─ 利益 ≦ 0 の場合:
                株式残高から減算

       現金残高は変動なし（リターン0%）

    3. 収支の計算
       年間収支 = 収入 - 基本生活費 - 臨時支出

    4. 取崩し/積立
       ├─ 収支 > 0 の場合:
       │    現金（上限まで）→ 国債（上限まで）→ 株式 の順で積立
       └─ 収支 < 0 の場合:
            取崩し優先順位（通常時/暴落時）に従って取崩し

    4.5. 回復目標の調整（暴落期・戻り期のみ）
         暴落前株式残高 += 年間収支
         ※赤字の場合は目標が下がり、黒字の場合は目標が上がる

    5. 枯渇判定
       総資産 ≦ 0 → 枯渇フラグ = true、枯渇年を記録
```

### 4.3 取崩しロジック

```
取崩し処理（取崩し額、優先順位リスト）:

  残り取崩し額 = 取崩し額
  
  優先順位リストの各資産について:
    if 残り取崩し額 > 0:
      実際の取崩し = min(該当資産残高, 残り取崩し額)
      該当資産残高 -= 実際の取崩し
      残り取崩し額 -= 実際の取崩し
  
  return 残り取崩し額  // > 0 なら資金不足
```

---

## 5. 出力仕様

### 5.1 資産推移グラフ

| 要素 | 説明 |
|------|------|
| 楽観ライン（緑・破線） | 75%タイルの資産推移 |
| 中央値ライン（青・実線） | 50%タイルの資産推移 |
| 悲観ライン（黄・破線） | 25%タイルの資産推移 |
| 最悪ライン（赤・破線） | 10%タイルの資産推移 |
| 枯渇ライン | 資産0の参照線 |

### 5.2 サマリー指標

#### メイン指標

| 指標 | 説明 |
|------|------|
| 成功率 | シミュレーション期間内に資産が枯渇しない確率（100% - 枯渇確率） |
| 安全引出率（SWR） | 年間取崩し額 ÷ 初期資産。4%以下が目安（4%ルール） |

#### シナリオ別結果（表形式）

| シナリオ | パーセンタイル | 表示項目 |
|----------|--------------|----------|
| 楽観 | 75% | 枯渇時年齢、期末資産、最低到達資産 |
| 中央値 | 50% | 枯渇時年齢、期末資産、最低到達資産 |
| 悲観 | 25% | 枯渇時年齢、期末資産、最低到達資産 |
| 最悪 | 10% | 枯渇時年齢、期末資産、最低到達資産 |

※枯渇時年齢：そのパーセンタイルで資産が枯渇する年齢。枯渇しない場合は「-」
※最低到達資産：各試行で最も資産が少なかった時点の値のパーセンタイル

#### リスク指標

| 指標 | 説明 |
|------|------|
| 暴落回数（平均） | 期間中に発生した暴落の平均回数 |
| 回復期間（平均） | 暴落からの回復にかかる平均年数 |

### 5.3 年次テーブル

各年のパーセンタイル別総資産額を表示する。

| 列 | 説明 |
|----|------|
| 年 | 対象年 |
| 年齢 | その年の年齢 |
| 収入 | その年の収入 |
| 支出① | 基本生活費 |
| 支出② | 臨時支出 |
| 楽観（75%） | 楽観シナリオの総資産額（緑色） |
| 中央値（50%） | 中央値シナリオの総資産額 |
| 悲観（25%） | 悲観シナリオの総資産額（黄色、枯渇時は赤色） |
| 最悪（10%） | 最悪シナリオの総資産額（オレンジ、枯渇時は赤色） |

※各パーセンタイルは年ごとに全試行から独立して計算される

### 5.4 50%タイル試行

1,000回の試行から**年次資産推移が50%タイルに最も近い試行を1つ選択**し、その試行の年次詳細を表示する。選択方法は、各年の資産額と中央値パスとの距離（二乗和）が最小の試行を選ぶ。これにより、年次結果テーブルの50%列と近い推移を示す試行が表示される。レジーム（市場局面）の推移を確認でき、暴落期・戻り期の動作検証に使用できる。

| 列 | 説明 |
|----|------|
| 年 | 対象年 |
| 年齢 | その年の年齢 |
| レジーム | 市場局面（通常/暴落/戻り） |
| 収入 | その年の収入 |
| 支出① | 基本生活費 |
| 支出② | 臨時支出 |
| 現金 | 現金残高 |
| 国債 | 国債残高 |
| 株式 | 株式残高 |
| 合計 | 総資産額 |

**表示上の工夫:**
- 暴落期の行は赤色背景で表示
- 戻り期の行は黄色背景で表示
- ヘッダーに暴落発生回数を表示

※年次テーブル（5.3）とは異なり、1つの試行の全年を通した結果を表示するため、レジームの遷移が追跡可能

---

## 6. 認証・データ保存

### 6.1 認証

| 項目 | 仕様 |
|------|------|
| 認証基盤 | Supabase Auth |
| 認証方式 | メール/パスワード |
| 機能 | 新規登録、ログイン、ログアウト、パスワードリセット |

### 6.2 データ保存

| 状態 | 保存先 | 備考 |
|------|--------|------|
| 未ログイン | localStorage | ブラウザごとにローカル保存 |
| ログイン済 | Supabase DB | 永続保存、複数デバイスで共有可能 |

※ログイン時、localStorageのデータは自動的にSupabase DBに移行される

### 6.3 保存データ構造

ユーザーごとに以下のデータを保存する。

**■ 現在の資産**

- 株式・投資信託保有額
- 国債保有額
- 国債積立上限
- 現金保有額
- 現金積立上限
- 年齢

**■ 収支計画**

- 基本設定（開始年、期間、成長率）
- 年次テーブル（各年の収入・支出データ）

**■ レジーム設定**

- 通常期利回り/標準偏差
- 暴落期利回り/標準偏差
- 戻り期利回り/標準偏差
- 暴落発生確率
- 国債リターン

---

## 7. バージョンアップ項目（将来対応）

以下の機能は初期バージョンには含めず、将来のバージョンアップで対応する。

| 機能 | 概要 |
|------|------|
| 収支一括変更 | 「〇年以降を一括変更」する機能 |
| OAuth認証 | Google等のソーシャルログイン対応 |
| レジーム内変動幅 | 同じ局面でも年ごとにリターンがブレる設定 |
| 資産配分リバランス | 定期的に資産配分を調整するシミュレーション |
| ブートストラップハイブリッド | レジーム判定は現在のまま、リターン生成を過去の実績データからリサンプリングする方式。分布の仮定なしに実績ベースのシミュレーションが可能 |

---

## 8. 用語集

| 用語 | 説明 |
|------|------|
| レジームスイッチング | 市場の状態（局面）が切り替わるモデル。通常期・暴落期・戻り期など |
| モンテカルロシミュレーション | 乱数を用いて多数の試行を行い、結果の分布を統計的に分析する手法 |
| パーセンタイル | データを小さい順に並べたときの位置。5%タイルは下位5%の値 |
| 枯渇 | 総資産が0以下になること |
| t分布 | 正規分布より裾が厚い確率分布。自由度パラメータで裾の厚さを制御。金融リターンのモデル化に適している |
| ファットテール | 確率分布の裾が厚いこと。極端な値（大暴落など）が正規分布より高い確率で発生する性質 |
| 自由度 | t分布の形状を決めるパラメータ。小さいほど裾が厚くなり、極端な値が出やすくなる |

---

## 改訂履歴

| バージョン | 日付 | 内容 |
|-----------|------|------|
| 1.0 | 2025/01/19 | 初版作成 |
| 2.0 | 2025/01/19 | レジームスイッチングモデル採用、画面構成を1画面に変更、支出2分類化、取崩し優先順位設定追加、シナリオ比較機能追加、過去データ分析機能追加 |
| 2.1 | 2025/01/19 | 技術スタック変更（TypeScript + Vite + Tailwind CSS + shadcn/ui） |
| 2.2 | 2025/01/19 | 収支計画のデフォルト値追加（基本生活費成長率: 1%、収入成長率: 0%） |
| 2.3 | 2025/01/19 | 株式（投資信託）を複数銘柄登録可能に変更 |
| 2.4 | 2025/01/22 | シナリオ管理機能を削除（レジーム設定のみでシンプル化） |
| 2.5 | 2025/01/22 | 取崩し優先順位を固定ロジック化（UI削除、経済合理的な順序に変更） |
| 2.6 | 2025/01/24 | レジーム設定に標準偏差を追加、戻り期終了条件を株式残高回復方式に変更、積立時の上限チェックを追加 |
| 2.7 | 2025/01/24 | 画面レイアウトを現在の実装に合わせて更新、年次テーブルに50%タイルの資産内訳を追加、サマリー指標に10%/25%タイルを追加 |
| 2.8 | 2025/01/24 | 資産成長ロジックを修正：国債リターンと株式リターンを別々に処理し、それぞれ現金→国債→株式の順で上限を守って配分（暴落時も国債リターン分は現金に補充） |
| 2.9 | 2025/01/24 | 回復期の取崩し優先順位を暴落期と同様に変更（現金→国債→株式）、戻り期の定義を明確化 |
| 2.10 | 2025/01/24 | レジーム設定デフォルト値を過去実績に基づき調整（通常期9%/14%、暴落期-25%/15%/15%、戻り期15%/18%）、25%タイル基準を推奨 |
| 2.11 | 2025/01/24 | 50%タイル試行テーブルを追加（レジーム推移を確認可能）、年次結果テーブルを総資産のみに簡素化 |
| 2.12 | 2025/01/24 | 仕様書を実装に合わせて更新：株式を単一値に変更、収支計画から初期収入/生活費を削除（年次テーブルで直接入力方式）、基本生活費成長率デフォルトを0%に変更、未ログイン時のデータ保存をlocalStorageに変更、過去データ分析機能を削除 |
| 2.13 | 2025/01/24 | 戻り期の回復目標を収支考慮方式に変更：毎年の収支（収入-支出）に応じて回復目標を調整（赤字なら目標低下、黒字なら目標上昇） |
| 2.14 | 2025/01/25 | サマリー指標を刷新（成功率/安全引出率/シナリオ別表形式）、パーセンタイルを75%/50%/25%/10%に統一、レジーム設定デフォルト値を過去実績に基づき調整（通常期10%/13%、暴落期-30%/28%、戻り期18%/22%）、50%タイル試行の選択方法を年次パス距離最小方式に変更、参照値ツールチップ追加 |
| 2.15 | 2026/01/25 | レジーム設定デフォルト値をS&P 500/MSCI ACWIの歴史的データに基づき再調整（通常期10%/10%、暴落期-22%/28%/13%、戻り期18%/20%）、参照値ツールチップを削除、歴史的データの根拠を追記 |
